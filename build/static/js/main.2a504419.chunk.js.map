{"version":3,"sources":["globals.js","components/viewerSlice.js","components/initializeViewer.js","components/Header.js","components/Viewer.js","components/ImportModal.js","components/ExportModal.js","components/OptionChoiceModal.js","components/AnimationPanel.js","components/ColorPanel.js","components/ElementCategoryPanel.js","components/TextureCategoryPanel.js","components/TogglePanel.js","components/OptionPanel.js","components/NodePanel.js","components/ControlMenu.js","App.js","app/store.js","serviceWorker.js","index.js","components/utils.js"],"names":["window","onclick","event","exportModal","document","getElementById","target","style","display","initialState","modelId","materials","animations","sceneGraph","controls","textureControls","disableButtons","latestControlId","sketchfabAPI","sceneGraphIsVisible","viewMode","surfaceOptionMap","surfaceConfigurationMode","materialNameSegmentMap","surfaceAttributeNameMap","groupingOptions","hiddenCategoryConfigurations","viewerSlice","createSlice","name","reducers","resetState","state","setSketchfabAPI","action","payload","setModelId","setMaterials","setAnimations","setSceneGraph","buildSceneGraph","children","buildCategoryOptions","setSceneGraphIsVisible","id","value","createControl","defaultConfiguration","animationUID","startTime","endTime","designations","geometries","allowsAnimation","unshift","type","entityIndex","entity","instanceID","configuration","initialValue","isExpanded","setViewMode","setControls","newControls","JSON","parse","stringify","i","length","j","animationName","setTextureControls","addTextureControls","concat","toggleDisableButtons","updateControl","key","console","log","setSurfaceOptionMap","setSurfaceConfigurationMode","setMaterialNameSegmentMap","setSurfaceAttributeNameMap","setUnselectedGeometries","setHiddenCategoryConfigurations","setAllNodesVisible","Object","keys","show","hide","actions","selectModelId","selectMaterials","selectAnimations","selectControls","selectDisableButtons","selectSceneGraph","selectSketchfabAPI","selectSceneGraphIsVisible","selectViewMode","selectSurfaceOptionMap","selectSurfaceConfigurationMode","selectMaterialNameSegmentMap","selectGroupingOptions","selectHiddenCategoryConfigurations","toggleImportModalDisplay","dispatch","modal","currentStyle","toggleModalDisplay","toggleOptionChoiceModalDisplay","initializeViewer","isSeeking","current_anim","apiSkfb","pollTime","duration","timeSlider","iframe","animationsList","getCurrentTime","err","time","percentage","innerHTML","toFixed","seekTo","requestAnimationFrame","api","config","options","init","this","Sketchfab","urlid","ui_controls","graph_optimizer","ui_animations","ui_watermark","ui_inspector","ui_stop","ui_infos","success","start","addEventListener","pause","getAnimations","play","setCurrentAnimationByUID","getSceneGraph","result","getMaterialList","surfaceOptions","buildTextureOptions","surfaceControls","bind","error","prefix","Header","useSelector","useDispatch","className","onChange","e","onClick","disabled","Viewer","class","src","title","allowfullscreen","mozallowfullscreen","webkitallowfullscreen","ImportModal","importString","replace","createJSExport","configurationMaps","ExportModal","OptionChoiceModal","isSurfaceConfigurationMode","visibility","AnimationPanel","props","option","animationOptions","map","animation","alignItems","flexDirection","newConfiguration","selectedIndex","textContent","htmlFor","renderAdditionalColors","additionalColors","undefined","color","index","array","newArray","newColor","colorRGB","hexRgb","format","num","renderColorsOption","materialsHtml","material","ColorPanel","transferObject","newColors","push","ElementCategoryPanel","unselectedGeometries","selectedGeometries","renderDisableMultiSelect","currentElementDesignation","multiSelects","multiSelect","element","showChecked","includes","designation","checked","newHiddenCategoryConfigurations","filter","hiddenElementDesignation","marginLeft","textAlign","setSelectedGeometries","geometry","selected","fontWeight","borderBottom","list","setList","flex","newGeometries","placeholder","humanReadable","newUnselectedGeometries","unSelectedGeometry","splice","fill","preserveAspectRatio","height","width","viewBox","verticalAlign","d","selectedGeometry","TextureConfigurationPanel","newOptions","updateOptions","addDashes","number","dashes","TogglePanel","sceneGraphHtml","node","depth","OptionPanel","renderPanel","overflow","control","renderOptions","NodePanel","values","reduce","accum","curr","ControlMenu","nodesButtonStyles","backgroundColor","optionsButtonStyles","App","configureStore","reducer","viewerReducer","middleware","getDefaultMiddleware","logger","Boolean","location","hostname","match","ReactDOM","render","StrictMode","store","navigator","serviceWorker","ready","then","registration","unregister","module","exports","materialID","uniqueStrings","geometryCategoryOptions","nodeNameArray","split","string","mainDesignation","capitalLetter","detailedTitle","indexOf","sort","a","b","charCodeAt","geometryName","materialOptions","primaryValue","isPrimary","ordering","optionExists","k","l","currentAttributeOptions"],"mappings":"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","file":"static/js/main.2a504419.chunk.js","sourcesContent":["// When the user clicks anywhere outside of the modal, close it\r\nwindow.onclick = function(event) {\r\n    var exportModal = document.getElementById(\"modal\");\r\n    if (event.target === exportModal) {\r\n      exportModal.style.display = \"none\";\r\n    }\r\n  }\r\n\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { buildSceneGraph, buildCategoryOptions } from './utils'\r\n\r\nconst initialState = {\r\n  modelId: '',\r\n  materials: [],\r\n  animations: [],\r\n  sceneGraph: [],\r\n  controls: [],\r\n  textureControls: [],\r\n  disableButtons: true,\r\n  latestControlId: 0,\r\n  sketchfabAPI: null,\r\n  sceneGraphIsVisible: {},\r\n  viewMode: \"options\",\r\n  surfaceOptionMap: {},\r\n  surfaceConfigurationMode: false,\r\n  materialNameSegmentMap: {},\r\n  surfaceAttributeNameMap: {},\r\n  groupingOptions: [],\r\n  hiddenCategoryConfigurations: {},\r\n};\r\n\r\nexport const viewerSlice = createSlice({\r\n  name: 'viewer',\r\n  initialState,\r\n  reducers: {\r\n    resetState: state => {\r\n      state = initialState;\r\n    },\r\n    setSketchfabAPI: (state, action) => {\r\n      state.sketchfabAPI = action.payload;\r\n    },\r\n    setModelId: (state, action) => {\r\n      state.modelId = action.payload;\r\n    },\r\n    setMaterials: (state, action) => {\r\n      state.materials = action.payload;\r\n    },\r\n    setAnimations: (state, action) => {\r\n      state.animations = action.payload;\r\n    },\r\n    setSceneGraph: (state, action) => {\r\n      buildSceneGraph(state, action.payload.children, 0);\r\n      buildCategoryOptions(state)\r\n    },\r\n    setSceneGraphIsVisible: (state, action) => {\r\n      const { id, value } = action.payload;\r\n      state.sceneGraphIsVisible[id] = value;\r\n    },\r\n    createControl: (state, action) => {\r\n      state.latestControlId = state.latestControlId += 1;\r\n      let id = state.latestControlId;\r\n      let defaultConfiguration = {}\r\n      if(action.payload === \"animation\") {\r\n        defaultConfiguration = {\r\n          animationUID: \"none\",\r\n          startTime: \"0\",\r\n          endTime: \"0\",\r\n        }\r\n      }\r\n\r\n      if(action.payload === \"geometryCategory\") {\r\n        defaultConfiguration = {\r\n          designations: [],\r\n          geometries: [],\r\n          allowsAnimation: [],  \r\n        }\r\n      }\r\n      state.controls.unshift({\r\n        type: action.payload,\r\n        id: id,\r\n        name: action.payload,\r\n        entityIndex: \"none\",\r\n        entity: {instanceID: 0},\r\n        configuration: defaultConfiguration,\r\n        initialValue: \"\",\r\n        isExpanded: true,\r\n      });\r\n    },\r\n    setViewMode: (state, action) => {\r\n      state.viewMode = action.payload\r\n    },\r\n    setControls: (state, action) => {\r\n      let newControls = JSON.parse(JSON.stringify(action.payload))\r\n      for(let i=0; i<newControls.length; ++i) {\r\n        if (newControls[i].type === \"animation\") {\r\n          for (let j=0; j<state.animations.length; ++j) {\r\n            if (newControls[i].configuration.animationName === state.animations[j][1]) {\r\n              newControls[i].configuration.animationUID = state.animations[j][0]\r\n            }\r\n          }\r\n        }\r\n        if (newControls[i].type === \"textureCategory\") {\r\n          state.surfaceConfigurationMode = true\r\n        }\r\n      }\r\n      state.controls = newControls;\r\n    },\r\n    setTextureControls: (state, action) => { \r\n      for (var i=0; i<action.payload.length; ++i) {\r\n        state.latestControlId = state.latestControlId += 1;\r\n        action.payload[i].id = state.latestControlId;\r\n      }     \r\n      state.textureControls = action.payload;\r\n    },\r\n    addTextureControls: (state) => {\r\n      state.controls = state.controls.concat(state.textureControls)\r\n    },\r\n    toggleDisableButtons: (state) => {\r\n      state.disableButtons = false;\r\n    },\r\n    updateControl: (state, action) => {\r\n      const { id, key, value } = action.payload;\r\n      console.log(action.payload)\r\n      for (let i=0; i<state.controls.length; ++i) {\r\n        if (state.controls[i].id == id) {\r\n          state.controls[i][key] = value;\r\n        }\r\n      }\r\n    },\r\n    setSurfaceOptionMap: (state, action) => {\r\n      console.log(\"setSurfaceOptionMap -> action.payload\")\r\n      console.log(action.payload)\r\n      state.surfaceOptionMap = action.payload;\r\n    },\r\n    setSurfaceConfigurationMode: (state, action) => {\r\n      state.surfaceConfigurationMode = action.payload;\r\n    },\r\n    setMaterialNameSegmentMap: (state, action) => {\r\n      console.log(\"setMaterialNameSegmentMap -> action.payload:\")\r\n      console.log(action.payload)\r\n      state.materialNameSegmentMap = action.payload;\r\n    },\r\n    setSurfaceAttributeNameMap: (state, action) => {\r\n      state.surfaceAttributeNameMap = action.payload;\r\n    },\r\n    setUnselectedGeometries: (state, action) => {\r\n      state.groupingOptions = action.payload;\r\n    },\r\n    setHiddenCategoryConfigurations: (state, action) => {\r\n      state.hiddenCategoryConfigurations = action.payload;\r\n    },\r\n    setAllNodesVisible: (state, action) => {\r\n      for(let i=0; i<Object.keys(state.sceneGraphIsVisible).length; ++i) {\r\n        if(action.payload) {\r\n          state.sketchfabAPI.show(Object.keys(state.sceneGraphIsVisible)[i])\r\n        } else {\r\n          state.sketchfabAPI.hide(Object.keys(state.sceneGraphIsVisible)[i])\r\n        }\r\n        state.sceneGraphIsVisible[Object.keys(state.sceneGraphIsVisible)[i]] = action.payload;\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const { \r\n  resetState,\r\n  setModelId, \r\n  createControl, \r\n  toggleDisableButtons,\r\n  updateControl,\r\n  setControls,\r\n  setTextureControls,\r\n  addTextureControls,\r\n  setSceneGraph,\r\n  setSceneGraphIsVisible,\r\n  setViewMode,\r\n  setUnselectedGeometries,\r\n  setHiddenCategoryConfigurations,\r\n  setSurfaceOptionMap,\r\n  setSurfaceConfigurationMode,\r\n  setMaterialNameSegmentMap,\r\n  setSurfaceAttributeNameMap,\r\n  setAllNodesVisible,\r\n  setAnimations,\r\n  setMaterials,\r\n  setSketchfabAPI,\r\n} = viewerSlice.actions;\r\n\r\nexport const selectModelId = state => state.modelId;\r\n\r\nexport const selectMaterials = state => state.materials;\r\n\r\nexport const selectAnimations = state => state.animations;\r\n\r\nexport const selectControls = state => state.controls;\r\n\r\nexport const selectTextureControls = state => state.controls;\r\n\r\nexport const selectDisableButtons = state => state.disableButtons;\r\n\r\nexport const selectSceneGraph = state => state.sceneGraph;\r\n\r\nexport const selectSketchfabAPI = state => state.sketchfabAPI;\r\n\r\nexport const selectSceneGraphIsVisible = state => state.sceneGraphIsVisible;\r\n\r\nexport const selectViewMode = state => state.viewMode;\r\n\r\nexport const selectSurfaceOptionMap = state => state.surfaceOptionMap;\r\n\r\nexport const selectSurfaceConfigurationMode = state => state.surfaceConfigurationMode;\r\n\r\nexport const selectMaterialNameSegmentMap = state => state.materialNameSegmentMap;\r\n\r\nexport const selectSurfaceAttributeNameMap = state => state.surfaceAttributeNameMap;\r\n\r\nexport const selectGroupingOptions = state => state.groupingOptions;\r\n\r\nexport const selectHiddenCategoryConfigurations = state => state.hiddenCategoryConfigurations;\r\n\r\nexport const toggleImportModalDisplay = ()  => dispatch => {\r\n  const modal = document.getElementById(\"import-modal\")\r\n\r\n  const currentStyle = modal.style.display;\r\n  if (currentStyle === 'block') {\r\n    modal.style.display = 'none';\r\n  } else {\r\n    modal.style.display = 'block';\r\n  }   \r\n}\r\n\r\nexport const toggleModalDisplay = () => dispatch => {\r\n  const modal = document.getElementById('modal');\r\n\r\n  const currentStyle = modal.style.display;\r\n  if (currentStyle === 'block') {\r\n    modal.style.display = 'none';\r\n  } else {\r\n    modal.style.display = 'block';\r\n  }  \r\n}\r\n\r\nexport const toggleOptionChoiceModalDisplay = () => dispatch => {\r\n  const modal = document.getElementById('control-choice-modal');\r\n\r\n  const currentStyle = modal.style.display;\r\n  if (currentStyle === 'block') {\r\n    modal.style.display = 'none';\r\n  } else {\r\n    modal.style.display = 'block';\r\n  }  \r\n}\r\n\r\nexport default viewerSlice.reducer;\r\n","import Sketchfab from '@sketchfab/viewer-api';\r\nimport { buildTextureOptions } from './utils'\r\nimport {\r\n    setSketchfabAPI,\r\n    setAnimations,\r\n    setControls,\r\n    setTextureControls,\r\n    toggleDisableButtons,\r\n    setSceneGraph,\r\n    setMaterials,\r\n    setMaterialNameSegmentMap,\r\n    setSurfaceOptionMap,\r\n    setSurfaceAttributeNameMap,\r\n} from './viewerSlice';\r\n\r\nconst initializeViewer = modelId => dispatch => {\r\n\r\n    dispatch(setControls([]));\r\n  \r\n    var iframe = document.getElementById('api-frame');\r\n    var version = '1.8.2';\r\n    var DEFAULT_URLID = '66e17931c39e4042ac5aa8764bee7f5a';\r\n    var DEFAULT_PREFIX = 'seat ';\t\t\r\n    \r\n    var CONFIG = {\r\n        urlid: modelId !== '' ? modelId : DEFAULT_URLID,\r\n        prefix: DEFAULT_PREFIX\r\n    };\r\n    var isSeeking;\r\n    var animationsList = [];\r\n    var current_anim;\r\n    var apiSkfb;\r\n    var pollTime, duration;\r\n    var timeSlider;\r\n  \r\n    pollTime = function() {\r\n          apiSkfb.getCurrentTime(function(err, time) {\r\n                if (!isSeeking) {\r\n                    var percentage = (100 * time) / duration;\r\n                    timeSlider.value = percentage;\r\n                                        \r\n                    var timeDisplay = document.getElementById('timeDisplay');\r\n                    timeDisplay.innerHTML = time.toFixed(2);\r\n                    if (time == 2) {\r\n                      apiSkfb.seekTo(1);\r\n                    }\r\n                requestAnimationFrame(pollTime);\r\n              }\r\n          });\r\n    };\r\n  \r\n    var Configurator = {\r\n        api: null,\r\n        config: null,\r\n        options: [],\r\n  \r\n        init: function (config, iframe) {\r\n            this.config = config;\r\n            var client = new Sketchfab(version, iframe);\r\n            client.init(config.urlid, {\r\n                ui_controls: 0,\r\n                graph_optimizer: 0,\r\n                ui_animations: 0,\r\n                ui_watermark: 0,\r\n                ui_inspector: 0,\r\n                ui_stop: 0,\r\n                ui_infos: 0,\r\n  \r\n                success: function onSuccess(api) {\r\n                    var controls = document.getElementById('animationControls');\r\n                    var buttonsText = `\r\n                        <div style=\"display: flex; justify-content: center;\">\r\n                          <p id=\"timeDisplay\"></p>\r\n                          <p id=\"animationName\" style=\"margin-left: 50px;\"></p>\r\n                        </div>\r\n                        <button id=\"play\">Play</button>\r\n                        <button id=\"pause\">Pause</button>\r\n                        <button id=\"previous\">Previous</button>\r\n                        <button id=\"next\">Next</button>\r\n                        <input \r\n                          id=\"timeSlider\" \r\n                          class=\"slider timeSlider\" \r\n                          style=\"width:100%\" \r\n                          type=\"range\" \r\n                          min=\"0\" \r\n                          max=\"100\" \r\n                          step=\"0.1\" \r\n                          value=\"0\"\r\n                        />\r\n                    `;\r\n                \r\n                    controls.innerHTML = buttonsText;\r\n  \r\n                    apiSkfb = api;\r\n                    dispatch(setSketchfabAPI(api));\r\n                    api.start();\r\n                    api.addEventListener('viewerready', function () {\r\n                        this.api = api;\r\n                        api.pause();\r\n  \r\n                        api.getAnimations(function(err, animations) {\r\n                            animationsList = animations;\r\n  \r\n                            dispatch(setAnimations(animations));\r\n  \r\n                            if (animations.length == 0) {                            \r\n                                var controls = document.getElementById('animationControls');\r\n                                controls.innerHTML = \"\";\r\n                            } else {  \r\n                                document.getElementById('pause').addEventListener('click', function() {\r\n                                    api.pause();\r\n                                });\r\n      \r\n                                document.getElementById('play').addEventListener('click', function() {\r\n                                    api.play();\r\n                                });\r\n      \r\n                                document.getElementById('previous').addEventListener('click', function() {\r\n                                    if (current_anim === 0) current_anim = animationsList.length;\r\n                                    current_anim--;\r\n                    \r\n                                    api.setCurrentAnimationByUID(animationsList[current_anim][0]);\r\n                                    api.seekTo(0);\r\n                                    duration = animationsList[current_anim][2];\r\n                                    var animationName = document.getElementById('animationName');\r\n                                    animationName.innerHTML = animationsList[current_anim][1];\r\n                                });\r\n                    \r\n                                document.getElementById('next').addEventListener('click', function() {\r\n                                    current_anim++;\r\n                                    if (current_anim === animationsList.length) current_anim = 0;\r\n                    \r\n                                    api.setCurrentAnimationByUID(animationsList[current_anim][0]);\r\n                                    api.seekTo(0);\r\n                                    duration = animationsList[current_anim][2];\r\n                                    var animationName = document.getElementById('animationName');\r\n                                    animationName.innerHTML = animationsList[current_anim][1];\r\n                                });\r\n  \r\n                                var animationName = document.getElementById('animationName');\r\n                                animationName.innerHTML = animationsList[0][1];\r\n                                current_anim = 0;\r\n                                api.setCurrentAnimationByUID(animations[current_anim][0]);\r\n                                duration = animations[current_anim][2];\r\n                                isSeeking = false;\r\n                                timeSlider = document.getElementById('timeSlider');\r\n            \r\n                                timeSlider.addEventListener('change', function() {\r\n                                    isSeeking = false;\r\n  \r\n                                    var time = (duration * timeSlider.value) / 100;\r\n                                    var timeDisplay = document.getElementById('timeDisplay');\r\n                                    timeDisplay.innerHTML = time.toFixed(2);\r\n                                });\r\n            \r\n                                timeSlider.addEventListener('input', function() {\r\n                                    isSeeking = true;\r\n                                    var time = (duration * timeSlider.value) / 100;\r\n                                    var timeDisplay = document.getElementById('timeDisplay');\r\n                                    timeDisplay.innerHTML = time.toFixed(2);\r\n                                    api.pause();\r\n                                    api.seekTo(time);\r\n                                });\r\n                                \r\n                                pollTime();\r\n                            }\r\n                        });\r\n  \r\n                        \r\n                        dispatch(toggleDisableButtons());\r\n                        \r\n                        api.getSceneGraph(function(err, result) {\r\n                            if (err) {\r\n                                console.log('Error getting nodes');\r\n                                return;\r\n                            }                  \r\n                            dispatch(setSceneGraph(result))        \r\n                        });\r\n  \r\n                        api.getMaterialList(function(err, materials) {\r\n                            dispatch(setMaterials(materials));\r\n                            \r\n                            let surfaceOptions = buildTextureOptions(materials)\r\n                            \r\n                            dispatch(setMaterialNameSegmentMap(surfaceOptions.materialNameSegmentMap))\r\n                            dispatch(setSurfaceOptionMap(surfaceOptions.surfaceOptionMap))\r\n                            dispatch(setSurfaceAttributeNameMap(surfaceOptions.surfaceAttributeNameMap))\r\n                            dispatch(setTextureControls(surfaceOptions.surfaceControls))\r\n                        });\r\n                    }.bind(this));\r\n                }.bind(this),\r\n                error: function onError() {\r\n                    console.log('Viewer error');\r\n                }\r\n            });\r\n        }\r\n    }\r\n  \r\n    Configurator.init(CONFIG, iframe);\r\n  };\r\n\r\nexport default initializeViewer;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n  selectModelId, \r\n  setModelId, \r\n  toggleImportModalDisplay,\r\n  toggleModalDisplay,\r\n  selectDisableButtons,\r\n} from './viewerSlice';\r\nimport initializeViewer from './initializeViewer';\r\n\r\nconst Header = () => {\r\n  const modelId = useSelector(selectModelId);\r\n  const disableButtons = useSelector(selectDisableButtons);\r\n  \r\n  const dispatch = useDispatch();\r\n  return (\r\n    <div className=\"header\">\r\n      <h1 className=\"header__title\">Configurator Studio - v1.0.15</h1>\r\n\r\n      <div className=\"header__buttons\">\r\n        <input id=\"model-id-input\"\r\n          value={modelId}\r\n          onChange={e => dispatch(setModelId(e.target.value))}\r\n        />\r\n        <button \r\n          id=\"displayButton\"    \r\n          className=\"header__button\"      \r\n          onClick={() => dispatch(initializeViewer(modelId))}\r\n        >Load Model\r\n        </button>        \r\n        <button \r\n          id=\"import-javascript\"\r\n          className=\"header__button\"\r\n          disabled={disableButtons}\r\n          onClick={() => dispatch(toggleImportModalDisplay())}>Import Configuration</button>\r\n        <button \r\n          id=\"export-javascript\"\r\n          className=\"header__button\"\r\n          disabled={disableButtons}\r\n          onClick={() => dispatch(toggleModalDisplay())}>Export</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nconst Viewer = () => {\r\n\r\n    return (        \r\n        <div class=\"viewer\">\r\n            <iframe \r\n                src=\"\" \r\n                id=\"api-frame\" \r\n                title=\"sketchfab-viewer\"\r\n                allowfullscreen mozallowfullscreen=\"true\" \r\n                webkitallowfullscreen=\"true\"\r\n            ></iframe>\r\n            <div id=\"animationControls\"></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Viewer;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { \r\n\ttoggleImportModalDisplay, \r\n\tsetControls,\r\n} from './viewerSlice';\r\n\r\nconst ImportModal = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <div id=\"import-modal\">\r\n            <div className=\"modal__content\">\r\n                <span class=\"close\"\r\n                    onClick={() => dispatch(toggleImportModalDisplay())}>&times;</span>\r\n                <div className=\"modal__header\">\r\n                    <h1>Paste Controls Here:</h1>\r\n                </div>\r\n                <button\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tlet jsInput = document.getElementById(\"js-input\").value;\r\n\t\t\t\t\t\tlet importString = jsInput.replace(\"var controls = \", \"\")\r\n\t\t\t\t\t\tlet controls = JSON.parse(importString)\r\n                        dispatch(setControls(controls))\r\n                        dispatch(toggleImportModalDisplay())\r\n\t\t\t\t\t}}\r\n\t\t\t\t>Import</button>\r\n\t\t\t\t<input id=\"js-input\" />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImportModal;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n\ttoggleModalDisplay, \r\n\tselectControls, \r\n\tselectModelId,\r\n\tselectSceneGraph, \r\n\tselectMaterials,\r\n\tselectSurfaceOptionMap,\r\n\tselectSurfaceConfigurationMode,\r\n\tselectMaterialNameSegmentMap,\r\n\tselectHiddenCategoryConfigurations,\r\n} from './viewerSlice';\r\n\r\nconst ExportModal = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\tconst controls = useSelector(selectControls);\r\n\tconst modelId = useSelector(selectModelId);\r\n\tconst sceneGraph = useSelector(selectSceneGraph);\r\n\tconst materials = useSelector(selectMaterials);\r\n\tconst surfaceOptionMap = useSelector(selectSurfaceOptionMap);\r\n\tconst surfaceConfigurationMode = useSelector(selectSurfaceConfigurationMode)\r\n\tconst materialNameSegmentMap = useSelector(selectMaterialNameSegmentMap)\r\n\tconst hiddenCategoryConfigurations = useSelector(selectHiddenCategoryConfigurations);\r\n\r\n\tconst configurationMaps = {\r\n\t\tcontrols, \r\n\t\tmodelId, \r\n\t\tsceneGraph, \r\n\t\tmaterials,\r\n\t\tsurfaceOptionMap, \r\n\t\tsurfaceConfigurationMode,\r\n\t\tmaterialNameSegmentMap,\r\n\t\thiddenCategoryConfigurations,\r\n\t}\r\n\r\n    return (\r\n        <div id=\"modal\">\r\n            <div className=\"modal__content\">\r\n                <span class=\"close\"\r\n                    onClick={() => dispatch(toggleModalDisplay())}>&times;</span>\r\n                <div className=\"modal__header\">\r\n                    <h1>Add This To Your Page</h1>\r\n                </div>\r\n                <textarea id=\"js-output\" value={createJSExport(configurationMaps)} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst createJSExport = (configurationMaps) => {\r\n\tconst {\r\n\t\tcontrols, \r\n\t\tmodelId, \r\n\t\tsceneGraph, \r\n\t\tmaterials,\r\n\t\tsurfaceOptionMap, \r\n\t\tsurfaceConfigurationMode,\r\n\t\tmaterialNameSegmentMap,\r\n\t\thiddenCategoryConfigurations,\r\n\t} = configurationMaps;\r\n\r\n\treturn (\r\n`\r\n// Sketchfab Viewer API: Change Texture/material\r\nvar version = '1.8.2';\r\nvar iframe = document.getElementById('api-frame');\r\nvar client = new window.Sketchfab(version, iframe);\r\n\r\nvar uid = '${modelId === '' ? '66e17931c39e4042ac5aa8764bee7f5a' : modelId}';\r\n\r\n/*\r\n\tCOPY THE LINE BELOW\r\n*/\r\n\r\nvar controls = ${JSON.stringify(controls)}\r\n\r\n/*\r\n\tCOPY THE LINE ABOVE\r\n*/\r\n\r\nvar myMaterials = ${JSON.stringify(materials)}\r\n\r\nvar sceneGraph = ${JSON.stringify(sceneGraph)}\r\n\r\nvar hiddenCategoryConfigurations = ${JSON.stringify(hiddenCategoryConfigurations)}\r\n\r\nvar surfaceConfigurationMode = ${surfaceConfigurationMode};\r\nvar surfaceOptionMap = ${JSON.stringify(surfaceOptionMap)};\r\nvar materialNameSegmentMap = ${JSON.stringify(materialNameSegmentMap)};\r\n\r\nvar animationObjects = {};\r\n\r\nvar controlsContainer = document.getElementById('sketchfab-lower-controls');\r\nvar toggleableItems = {};\r\nvar toggleableGroups = {};\r\n\r\nvar currentAnimation = \"\";\r\nvar currentAnimationEndTime = 0;\r\nvar isElementCategoryControlled = false;\r\nvar firstGroupingControlIndex = -1;\r\nvar appContainer = document.querySelector(\"div.sketchfab__container\")\r\n\r\nvar appWidth = Number(appContainer.style.width.replace(\"px\",\"\"))\r\nappContainer.style.display = \"block\"\r\n\r\nvar apiSkfb, pollTime;\r\n\r\nvar buildNodeNameArray = function(children, depth) {\r\n\tfor (let i=0; i<children.length; ++i) {\r\n\t\tif(children[i].name == undefined) {\r\n\t\t\tnameArrays.push({name: children[i].type, depth: depth, instanceID: children[i].instanceID});\r\n\t\t} else {\r\n\t\t\tnameArrays.push({name: children[i].name, depth: depth, instanceID: children[i].instanceID});\r\n\t\t}\r\n\t\tif (children[i].children != undefined || children[i].children != null) {\t\t\t\r\n\t\t\tbuildNodeNameArray(children[i].children, depth+1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\npollTime = function() {\r\n\tapiSkfb.getCurrentTime(function(err, time) {\r\n\t\t\r\n\t\tif (currentAnimationEndTime > 0 && time >= currentAnimationEndTime) {\r\n\t\t\tapiSkfb.pause();\r\n\t\t}\r\n\t\trequestAnimationFrame(pollTime);\r\n\t});\r\n};\r\n\r\n\r\nvar success = function(api) {\r\n    apiSkfb = api;\r\n\tapi.start(function() {\r\n\t\tapi.addEventListener('viewerready', function() {\r\n\t\t\tcategorySelectObserver = new MutationObserver(function(mutationsList, categorySelectObserver) {\r\n\t\t\t\tsetVisibleNodes(api);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tapi.pause();\r\n\t\t\t\r\n\t\t\tvar animations = [];\r\n\t\t\tfor (let i = 0; i < controls.length; ++i) {\t\r\n\t\t\t\tif (controls[i].type == \"animation\") {\r\n\t\t\t\t\tvar animationControls = document.getElementById(\"sketchfab-animation-controls\")\r\n\t\t\t\t\tanimationControls.style.display = \"block\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar animationButtonContainer = document.getElementById(\"sketchfab-animation-buttons\")\r\n\t\t\t\t\tvar animationButton = document.createElement(\"button\")\r\n\t\t\t\t\tanimationButton.id = \"animation-\" + controls[i].id\r\n\t\t\t\t\tanimationButton.textContent = controls[i].name;\r\n\t\t\t\t\tanimationButton.addEventListener('click', function(e) {\r\n\t\t\t\t\t\tvar animationId = e.target.id.split(\"-\")[1]\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar startTime = animationObjects[animationId].startTime;\r\n\t\t\t\t\t\tvar endTime = animationObjects[animationId].endTime;\r\n\t\t\t\t\t\tvar animationUID = animationObjects[animationId].uid;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentAnimationEndTime = endTime;\r\n\t\t\t\t\t\tapi.setCurrentAnimationByUID(animationUID);\r\n\t\t\t\t\t\tapi.seekTo(startTime);\r\n\t\t\t\t\t\tapi.play();\r\n\t\t\t\t\t})\r\n\t\t\t\t\tanimationButtonContainer.appendChild(animationButton)\r\n\t\t\t\t\t\r\n\t\t\t\t\tanimations.push(controls[i]);\r\n\t\t\t\t\tanimationObjects[controls[i].id] = {name: controls[i].name, startTime: Number(controls[i].configuration.startTime), endTime: Number(controls[i].configuration.endTime), uid: controls[i].configuration.animationUID}; \r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar singleControlContainer = document.createElement(\"div\");\r\n\t\t\t\tsingleControlContainer.classList.add(\"sketchfab-single-control-container\");\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (controls[i].type == \"color\") {\r\n\t\t\t\t\tvar resetBut = document.createElement(\"button\");\r\n\t\t\t\t\tresetBut.innerHTML = \"Reset\";\r\n\t\t\t\t\tresetBut.onclick = function(e) {\t\r\n\t\t\t\t\t\tvar m = myMaterials[controls[i].entityIndex];\r\n\t\t\t\t\t\tm = JSON.parse(JSON.stringify(controls[i].entity));\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tapi.setMaterial(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsingleControlContainer.appendChild(resetBut);\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (let j = 0; j < controls[i].additionalColors.length; ++j) {\r\n\t\t\t\t\t\tvar colorBut = document.createElement(\"button\");\r\n\r\n\t\t\t\t\t\tcolorBut.innerHTML = controls[i].additionalColors[j].name;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcolorBut.id = controls[i].id + \"-\" + controls[i].name\r\n\t\t\t\t\t\tcolorBut.onclick = function(e) {\t\r\n\t\t\t\t\t\t\tvar m = myMaterials[controls[i].entityIndex];\r\n\t\t\t\t\t\t\tm.channels.AlbedoPBR.factor = 1;\r\n\t\t\t\t\t\t\tm.channels.AlbedoPBR.enable = true;\r\n\t\t\t\t\t\t\tm.channels.AlbedoPBR.color = controls[i].additionalColors[j].colorRGB;\r\n\t\t\t\t\t\t\tm.channels.AlbedoPBR.texture = null;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tm.channels.DiffuseColor.factor = 1;\r\n\t\t\t\t\t\t\tm.channels.DiffuseColor.enable = true;\r\n\t\t\t\t\t\t\tm.channels.DiffuseColor.color = controls[i].additionalColors[j].colorRGB;\r\n\t\t\t\t\t\t\tm.channels.DiffuseColor.texture = null;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tm.channels.DiffusePBR.color = controls[i].additionalColors[j].colorRGB;\r\n\t\t\t\t\t\t\tm.channels.DiffusePBR.enable = false;\r\n\t\t\t\t\t\t\tm.channels.DiffusePBR.factor = 1;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tapi.setMaterial(m);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsingleControlContainer.appendChild(colorBut);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t} else if (controls[i].type === \"geometryCategory\") {\t\r\n\t\t\t\t\tisElementCategoryControlled = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar wrapper = initializeGeometrySelect(i);\r\n\t\t\t\t\tvar customOptions = wrapper.querySelector(\".sketchfab-options\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var j=0; j<controls[i].configuration.geometries.length; ++j) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet customOption = document.createElement(\"span\")\r\n\t\t\t\t\t\tcustomOption.classList.add(\"sketchfab-option\");\r\n\t\t\t\t\t\tvar name = controls[i].configuration.geometries[j].designation;\r\n\t\t\t\t\t\tvar humanReadable = controls[i].configuration.geometries[j].humanReadable;\r\n\t\t\t\t\t\tcustomOption.setAttribute(\"data-value\", name)\r\n\t\t\t\t\t\tcustomOption.id = name + \"-\" + j + \"-\" + i;\r\n\t\t\t\t\t\tcustomOption.innerHTML = name + \" - \" + humanReadable;\r\n\t\t\t\t\t\tif (controls[i].configuration.geometries[j].designation === controls[i].initialValue) {\r\n\t\t\t\t\t\t\tcustomOption.classList.add(\"selected\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcustomOption.addEventListener('click', function(e) {\r\n\t\t\t\t\t\t\thandleUpdateSelect(e);\r\n\t\t\t\t\t\t\tvar idArray = e.target.id.split(\"-\")\r\n\t\t\t\t\t\t\tvar optionName = idArray[0]\r\n\t\t\t\t\t\t\tvar allCategoryOptions = document.querySelectorAll(\".sketchfab-geometry-category .sketchfab-option\")\r\n\t\t\t\t\t\t\tfor (var k=0; k<allCategoryOptions.length; ++k) {\r\n\t\t\t\t\t\t\t\tallCategoryOptions[k].style.visibility = \"visible\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar currentCategorySelections = Array.from(document.querySelectorAll(\".sketchfab-geometry-category .sketchfab-select\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(select => !select.classList.contains(\"sketchfab-select-open\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map(select => select.querySelector(\".sketchfab-select-value\").textContent)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcurrentCategorySelections.push(optionName)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (var k=0; k<currentCategorySelections.length; ++k) {\r\n\t\t\t\t\t\t\t\tvar selectionName = currentCategorySelections[k];\r\n\t\t\t\t\t\t\t\tif (hiddenCategoryConfigurations[selectionName] !== undefined) {\r\n\t\t\t\t\t\t\t\t\tfor (var l=0; l<hiddenCategoryConfigurations[selectionName].length; ++l) {\r\n\t\t\t\t\t\t\t\t\t\tvar nameToHide = hiddenCategoryConfigurations[selectionName][l]\r\n\t\t\t\t\t\t\t\t\t\tvar optionToHide = document.querySelector(\"[data-value='\" + nameToHide + \"']\")\r\n\t\t\t\t\t\t\t\t\t\toptionToHide.style.visibility = \"hidden\"\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdisableAnimations();\r\n\t\t\t\t\t\t\thandleHidingOptions(optionName);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcustomOptions.appendChild(customOption)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tsingleControlContainer.appendChild(wrapper);\t\t\r\n\t\t\t\t} else if (controls[i].type === \"textureCategory\") {\t\t\r\n\t\t\t\t\tconst { geometryName, options, isPrimary, ordering} = controls[i].configuration\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar wrapper = initializeTextureSelect(geometryName, controls[i].name, controls[i].initialValue)\r\n\t\t\t\t\twrapper.classList.add(\"sketchfab-texture-category\")\r\n\t\t\t\t\twrapper.id = geometryName + \"-\" + ordering;\r\n\t\t\t\t\tvar customOptions = wrapper.querySelector(\".sketchfab-options\")\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tfor (var j=0; j<options.length; ++j) {\r\n\t\t\t\t\t\t\tlet customOption = document.createElement(\"span\")\r\n\t\t\t\t\t\t\tcustomOption.classList.add(\"sketchfab-option\");\r\n\t\t\t\t\t\t\tconst { name, humanReadable } = options[j];\r\n\t\t\t\t\t\t\tif (name === controls[i].initialValue) {\r\n\t\t\t\t\t\t\t\tcustomOption.classList.add(\"selected\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcustomOption.setAttribute(\"data-value\", name)\r\n\t\t\t\t\t\t\tcustomOption.id = name + \"-\" + geometryName + \"-\" + j + \"-\" + j + \"-\" + i;\r\n\t\t\t\t\t\t\tcustomOption.innerHTML = name + \" - \" + humanReadable;\r\n\t\t\t\t\t\t\tcustomOption.addEventListener('click', e => {\r\n\t\t\t\t\t\t\t\thandleUpdateSelect(e);\t\t\t\r\n\t\t\t\t\t\t\t\thandleHidingTextureOptions(api)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcustomOptions.appendChild(customOption)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsingleControlContainer.appendChild(wrapper);\r\n\t\t\t\t\t\t\r\n\t\t\t\t} else if (controls[i].type == \"toggle\") {\r\n\t\t\t\t\ttoggleableItems[String(controls[i].entity.instanceID)] = \"visible\";\r\n\t\t\t\t\tvar toggleBut = document.createElement(\"button\");\r\n\t\t\t\t\ttoggleBut.innerHTML = \"Toggle \" + controls[i].name;\r\n\t\t\t\t\ttoggleBut.id = controls[i].entity.instanceID;\r\n\t\t\t\t\ttoggleBut.onclick = function(e) {\r\n\t\t\t\t\t\tvar isVisible = toggleableItems[e.target.id];\r\n\t\t\t\t\t\tif (isVisible == \"visible\") {\r\n\t\t\t\t\t\t\tapi.hide(e.target.id);\r\n\t\t\t\t\t\t\ttoggleableItems[String(controls[i].entity.instanceID)] = \"hidden\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tapi.show(e.target.id);\r\n\t\t\t\t\t\t\ttoggleableItems[String(controls[i].entity.instanceID)] = \"visible\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsingleControlContainer.appendChild(toggleBut);\r\n\t\t\t\t}\r\n\t\t\t\tcontrolsContainer.appendChild(singleControlContainer);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//show/hide to OG specification\r\n\t\t\tif (isElementCategoryControlled) {\r\n\t\t\t\twindow.addEventListener('click', function(e) {\r\n\t\t\t\t\tfor (const select of document.querySelectorAll('.sketchfab-select')) {\r\n\t\t\t\t\t\tif (!select.contains(e.target)) {\r\n\t\t\t\t\t\t\tselect.classList.remove('sketchfab-select-open');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tsetVisibleNodes(api);\r\n\t\t\t\thandleHidingOptions();\r\n\t\t\t\tdisableAnimations();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (animations.length > 0) {\r\n\t\t\t\tpollTime();\t\t\t\r\n\t\t\t}\t\t\t\r\n\t\t\t\r\n\t\t\tif (surfaceConfigurationMode) {\r\n\t\t\t\thandleHidingTextureOptions(api)\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n};\r\n\r\nclient.init(uid, {\r\n\tsuccess: success,\r\n\terror: () => console.error('Sketchfab API error'),\r\n\tautostart: 0,\r\n\tpreload: 0,\r\n\tui_animations: 0,\r\n\tui_watermark: 0,\r\n\tui_inspector: 0,\r\n\tui_stop: 0,\r\n\tui_infos: 0,\r\n});\r\n\r\nvar handleHidingTextureOptions = function(api) {\r\n\tconsole.log(\"BEGIN: handleHidingTextureOptions\")\r\n\t\r\n\tvar textureSelects = document.getElementsByClassName(\"sketchfab-texture-category\")\t\r\n\tfor (var i=0; i<textureSelects.length; ++i) {\r\n\t\tvar options = textureSelects[i].getElementsByClassName(\"sketchfab-option\");\r\n\t\tvar geometryName = textureSelects[i].id.split(\"-\")[0]\r\n\t\tvar ordering = textureSelects[i].id.split(\"-\")[1]\r\n\t\tvar isPrimary = Number(ordering) === 0;\r\n\t\tif (!isPrimary) {\r\n\t\t\tvar currentInitialPrimarySelection = document.getElementById(geometryName + \"-0\").querySelector(\".sketchfab-select__trigger span\").textContent;\r\n\t\t\tvar availableOptions = surfaceOptionMap[geometryName][currentInitialPrimarySelection][ordering-1].sort()\r\n\t\t\tvar previouslyAvailableOptions =  Array.from(options).filter(op => op.style.display === \"block\").map(op => op.getAttribute(\"data-value\")).sort()\r\n\t\t\tconsole.log(\"availableOptions:\")\r\n\t\t\tconsole.log(availableOptions)\r\n\t\t\tconsole.log(\"previouslyAvailableOptions:\")\r\n\t\t\tconsole.log(previouslyAvailableOptions)\r\n\t\t\tlet equal = availableOptions.length == previouslyAvailableOptions.length && availableOptions.every((element, index)=> element === previouslyAvailableOptions[index] );\r\n\t\t\t\r\n\t\t\tvar triggerSpan = textureSelects[i].querySelector(\".sketchfab-select__trigger span\")\r\n\t\t\t\r\n\t\t\tif (!equal) {\r\n\t\t\t\tvar newValue = availableOptions[0];\r\n\t\t\t\ttriggerSpan.textContent = newValue;\r\n\t\t\t\tfor (var j=0; j<options.length; ++j) {\r\n\t\t\t\t\toptions[j].classList.remove(\"selected\")\r\n\t\t\t\t\tvar optionValue = options[j].getAttribute(\"data-value\")\r\n\t\t\t\t\tif (optionValue === newValue) {\r\n\t\t\t\t\t\toptions[j].classList.add(\"selected\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions[j].style.display = \"none\"\r\n\t\t\t\t\tvar optionValue = options[j].getAttribute(\"data-value\")\r\n\t\t\t\t\tif (availableOptions.includes(optionValue)) {\r\n\t\t\t\t\t\toptions[j].style.display = \"block\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfor (var i=0; i<textureSelects.length; ++i) {\r\n\t\tvar geometryName = textureSelects[i].id.split(\"-\")[0]\r\n\t\tconfigureMaterials(geometryName, api)\t\t\r\n\t}\r\n\r\n\tconsole.log(\"END: handleHidingTextureOptions\")\r\n}\r\n\r\nvar configureMaterials = function(geometryName, api) {\r\n\tconsole.log(\"BEGIN: configureMaterials\")\r\n\tconsole.log(arguments)\r\n\t//get array of selected values\r\n\tvar relevantSelects = document.getElementsByClassName(geometryName + \"-triggerSpan\")\r\n\tconsole.log(\"relevantSelects:\")\r\n\tconsole.log(relevantSelects)\r\n\t//build name string via accessing selected values\r\n\tvar materialNameString = geometryName + \"-\";\r\n\t\r\n\tfor (var k=0; k<relevantSelects.length; ++k) {\r\n\t\tmaterialNameString += relevantSelects[k].textContent + \"-\";\r\n\t}\r\n\tconsole.log(\"materialNameString:\")\r\n\tconsole.log(materialNameString)\r\n\tvar newMaterial;\r\n\tfor (var k=0; k<myMaterials.length; ++k) {\r\n\t\tif (myMaterials[k].name.startsWith(materialNameString)) {\r\n\t\t\tnewMaterial = JSON.parse(JSON.stringify(myMaterials[k]));\r\n\t\t}\r\n\t}\r\n\tconsole.log(\"newMaterial:\")\r\n\tconsole.log(newMaterial)\r\n\t\r\n\tfor (var k=0; k<myMaterials.length; ++k) {\r\n\t\tif (myMaterials[k].name === geometryName) {\r\n\t\t\tmyMaterials[k].channels = JSON.parse(JSON.stringify(newMaterial.channels));\r\n\t\t\tmyMaterials[k].reflection = newMaterial.reflection;\r\n\t\t\tmyMaterials[k].reflector = newMaterial.reflector;\r\n\t\t\tmyMaterials[k].shadeless = newMaterial.shadeless;\r\n\t\t\tapi.setMaterial(myMaterials[k], function() {console.log(\"material updated\")})\r\n\t\t}\r\n\t}\r\n\tconsole.log(\"END: configureMaterials\")\r\n}\r\n\r\nvar setVisibleNodes = function(api) {\r\n\tconsole.log(\"BEGIN: setVisibleNotes\")\r\n\tvar allCategorySelects = document.querySelectorAll(\".sketchfab-geometry-category span.sketchfab-select-value\")\r\n\tvar selectedPrefixes = [];\r\n\t\r\n\tvar lettersByDesignation = {};\r\n\tfor (var i=0; i<allCategorySelects.length; ++i) {\r\n\t\tselectedPrefixes.push(allCategorySelects[i].textContent);\r\n\t\tlettersByDesignation[selectedPrefixes[i]] = []\r\n\t}\r\n\t\r\n\tvar relevantNodes = [];\r\n\t\r\n\tfor (var i=0; i<sceneGraph.length; ++i) {\r\n\t\tvar indexContainingCodes = i;\r\n\t\tvar isMatrixTransform = false;\r\n\t\tif (sceneGraph[i].name === \"MatrixTransform\") {\r\n\t\t\tindexContainingCodes = i - 1;\r\n\t\t\tisMatrixTransform = true;\r\n\t\t}\r\n\t\t\r\n\t\tvar nodeNameArray = sceneGraph[indexContainingCodes].name.split(\"-\")\r\n\t\tvar currentNodeDesignation = nodeNameArray[0];\r\n\t\tvar currentNodeLetterCode = nodeNameArray[1];\r\n\t\tapi.hide(sceneGraph[indexContainingCodes].instanceID);\r\n\t\t\r\n\t\tif (selectedPrefixes.includes(currentNodeDesignation)) {\r\n\t\t\tfor (var j=0; j<currentNodeLetterCode.length; ++j) {\r\n\t\t\t\tif (lettersByDesignation[currentNodeDesignation].indexOf(currentNodeLetterCode[j]) === -1) {\r\n\t\t\t\t\tlettersByDesignation[currentNodeDesignation].push(currentNodeLetterCode[j])\r\n\t\t\t\t}\t\r\n\t\t\t}\t\t\t\t\t\r\n\t\t\t\r\n\t\t\tvar currentUpstreamDepth = Number(sceneGraph[i].depth)\r\n\t\t\tvar currentUpstreamIndex = i-1;\r\n\t\t\tvar upStreamRelevantNodes = []\r\n\t\t\twhile(currentUpstreamDepth > 2) {\r\n\t\t\t\tif (sceneGraph[currentUpstreamIndex].depth < currentUpstreamDepth) {\r\n\t\t\t\t\tvar currentUpstreamDesignation = sceneGraph[currentUpstreamIndex].name.split(\"-\")[0]\r\n\t\t\t\t\tvar currentUpstreamLetterCode = sceneGraph[currentUpstreamIndex].name.split(\"-\")[1]\r\n\t\t\t\t\tif (currentUpstreamDesignation !== currentNodeDesignation) {\r\n\t\t\t\t\t\tupStreamRelevantNodes.push({letterCode: currentUpstreamLetterCode, instanceID: sceneGraph[currentUpstreamIndex].instanceID, name: sceneGraph[currentUpstreamIndex].name})\r\n\t\t\t\t\t}\t\r\n\t\t\t\t\tcurrentUpstreamDepth = Number(sceneGraph[currentUpstreamIndex].depth);\r\n\t\t\t\t}\r\n\t\t\t\tcurrentUpstreamIndex = currentUpstreamIndex - 1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\trelevantNodes.push({letterCode: currentNodeLetterCode, instanceID: sceneGraph[i].instanceID, name: sceneGraph[i].name, upStreamRelevantNodes: upStreamRelevantNodes})\t\t\r\n\t\t}\r\n\t}\t\t\r\n\t\r\n\tvar letters = [];\r\n\tvar commonLetter = \"\"\r\n\tfor (var i=0; i<Object.values(lettersByDesignation).length; ++i) {\r\n\t\tif (Object.values(lettersByDesignation)[i].length === 1) {\r\n\t\t\tcommonLetter = Object.values(lettersByDesignation)[i][0]\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tletters = letters.concat(Object.values(lettersByDesignation)[i])\r\n\t\tcommonLetter = mode(letters)[0]\r\n\t}\r\n\t\r\n\tfor (var i=0; i<relevantNodes.length; ++i) {\r\n\t\tif (relevantNodes[i].letterCode.indexOf(commonLetter) != -1) {\r\n\t\t\tapi.show(relevantNodes[i].instanceID);\r\n\t\t\tfor (var j=0; j<relevantNodes[i].upStreamRelevantNodes.length; ++j) {\r\n\t\t\t\tconsole.log(\"showing upstream node:\")\r\n\t\t\t\tconsole.log(relevantNodes[i].upStreamRelevantNodes[j].name)\r\n\t\t\t\tapi.show(relevantNodes[i].upStreamRelevantNodes[j].instanceID)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconsole.log(\"END: setVisibleNodes\")\r\n}\r\n\r\nvar mode = function(arr) { \r\n\tif(arr.filter((x,index) => arr.indexOf(x) == index).length == arr.length) {\r\n\t\treturn arr; \r\n\t} else {\r\n\t\treturn mode(arr.sort((x,index)=>x-index).map((x,index)=>arr.indexOf(x)!=index ? x : null ).filter(x=>x!=null))\r\n\t}\t\t\r\n}\r\n\r\nvar setNonPrimarySurfaceConfiguration = function(e, api) {\r\n\tconsole.log(\"BEGIN: setNonPrimarySurfaceConfiguration\")\r\n\thandleUpdateSelect(e);\r\n\tvar geometryName = e.target.id.split(\"-\")[1]\r\n\tvar attributeIndex = e.target.id.split(\"-\")[2]\r\n\tconfigureMaterials(geometryName, api)\r\n\t\r\n\tconsole.log(\"END: setNonPrimarySurfaceConfiguration\")\r\n}\r\n\r\nvar handleUpdateSelect = function(e) {\r\n\tconsole.log(\"BEGIN: handleUpdateSelect\")\r\n\tvar nameCode = e.target.id.split(\"-\")[0]\r\n\t\r\n\tif (!e.target.classList.contains('selected')) {\r\n\t\t\r\n\t\te.target.parentNode.querySelector('.sketchfab-option.selected').classList.remove('selected');\r\n\t\te.target.classList.add('selected');\r\n\t\te.target.closest('.sketchfab-select').querySelector('.sketchfab-select__trigger span').textContent = nameCode;\t\t\t\t\t\t\t\t\r\n\t}\r\n\tconsole.log(\"END: handleUpdateSelect\")\r\n}\r\n\r\n\r\nvar handleHidingOptions = function(optionName=\"\") {\r\n\tvar allCategoryOptions = document.querySelectorAll(\".sketchfab-geometry-category .sketchfab-option\")\r\n\tfor (var k=0; k<allCategoryOptions.length; ++k) {\r\n\t\tallCategoryOptions[k].style.display = \"block\";\r\n\t}\r\n\t\r\n\tvar currentCategorySelections = Array.from(document.querySelectorAll(\".sketchfab-geometry-category .sketchfab-select\"))\r\n\t\t\t\t\t\t\t.filter(select => !select.classList.contains(\"sketchfab-select-open\"))\r\n\t\t\t\t\t\t\t.map(select => select.querySelector(\".sketchfab-select-value\").textContent)\r\n\t\t\t\t\t\t\t\r\n\tcurrentCategorySelections.push(optionName)\r\n\t\r\n\tfor (var k=0; k<currentCategorySelections.length; ++k) {\r\n\t\tvar selectionName = currentCategorySelections[k];\r\n\t\tif (hiddenCategoryConfigurations[selectionName] !== undefined) {\r\n\t\t\tfor (var l=0; l<hiddenCategoryConfigurations[selectionName].length; ++l) {\r\n\t\t\t\tvar nameToHide = hiddenCategoryConfigurations[selectionName][l]\r\n\t\t\t\tvar optionToHide = document.querySelector(\"[data-value='\" + nameToHide + \"']\")\r\n\t\t\t\toptionToHide.style.display = \"none\"\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar disableAnimations = function() {\t\t\r\n\tvar allCategorySelects = document.querySelectorAll(\".sketchfab-geometry-category span.sketchfab-select-value\")\r\n\tvar allowAnimations = true;\r\n\tfor (var i=0; i<allCategorySelects.length; ++i) {\r\n\t\tvar controlIndex = allCategorySelects[i].id.split(\"-\")[1]\r\n\t\tvar currentNameCode = allCategorySelects[i].textContent;\r\n\t\tfor (var j=0; j<controls[controlIndex].configuration.geometries.length; ++j) {\r\n\t\t\tif (controls[controlIndex].configuration.geometries[j].designation === currentNameCode) {\r\n\t\t\t\tconsole.log(\"found matching geometry in control\")\r\n\t\t\t\tif (controls[controlIndex].configuration.geometries[j].allowsAnimation === false) {\r\n\t\t\t\t\tallowAnimations = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar animationButtons = document.querySelectorAll(\"#sketchfab-animation-buttons button\")\r\n\tfor (var i=0; i<animationButtons.length; ++i) {\r\n\t\tanimationButtons[i].disabled = true;\r\n\t}\r\n\tif (allowAnimations) {\r\n\t\tfor (var i=0; i<animationButtons.length; ++i) {\r\n\t\t\tanimationButtons[i].disabled = false;\r\n\t\t}\t\t\t\t\t\t\r\n\t}\r\n}\r\n\r\nvar initializeGeometrySelect = function(controlIndex) {\r\n\t\t\t\t\t\r\n\tvar wrapper = document.createElement(\"div\")\r\n\twrapper.classList.add(\"sketchfab-select-wrapper\")\r\n\twrapper.classList.add(\"sketchfab-geometry-category\")\r\n\twrapper.style.width = (appWidth/4) + \"px\";\r\n\t\r\n\tvar select = document.createElement(\"div\")\r\n\tselect.classList.add(\"sketchfab-select\")\r\n\t\r\n\tvar selectTrigger = document.createElement(\"div\")\r\n\tselectTrigger.classList.add(\"sketchfab-select__trigger\")\r\n\t\r\n\tvar triggerSpan = document.createElement(\"span\")\r\n\ttriggerSpan.textContent = controls[controlIndex].initialValue;\r\n\ttriggerSpan.id = \"triggerSpan-\" + controlIndex;\r\n\ttriggerSpan.classList.add(\"sketchfab-select-value\")\r\n\tselectTrigger.appendChild(triggerSpan)\r\n\t\r\n\tvar arrow = document.createElement(\"div\")\r\n\tarrow.classList.add(\"sketchfab-select-arrow\")\r\n\tselectTrigger.appendChild(arrow)\t\t\t\t\t\r\n\tselect.appendChild(selectTrigger)\r\n\t\r\n\tvar customOptions = document.createElement(\"div\")\r\n\tcustomOptions.classList.add(\"sketchfab-options\")\r\n\tvar selectTitle = document.createElement(\"h3\")\r\n\tselectTitle.classList.add(\"sketchfab-title\")\r\n\tselectTitle.textContent = controls[controlIndex].name;\r\n\tcustomOptions.appendChild(selectTitle)\r\n\tselect.appendChild(customOptions)\r\n\twrapper.appendChild(select)\t\r\n\r\n\twrapper.addEventListener('click', function() {\r\n\t\tthis.querySelector('.sketchfab-select').classList.toggle('sketchfab-select-open');\t\r\n\t})\r\n\r\n\tcategorySelectObserver.observe(triggerSpan, {characterData: false, childList: true, attributes: false});\r\n\t\r\n\treturn wrapper;\r\n}\r\n\r\nvar initializeTextureSelect = function(geometryName, selectName, initialValue) {\r\n\tconsole.log(\"BEGIN: initializeTextureSelect:\")\r\n\tconsole.log(\"initialValue:\")\r\n\tconsole.log(initialValue)\r\n\tvar wrapper = document.createElement(\"div\")\r\n\twrapper.classList.add(\"sketchfab-select-wrapper\")\r\n\t\r\n\twrapper.style.width = (appWidth/4) + \"px\";\r\n\t\r\n\tvar select = document.createElement(\"div\")\r\n\tselect.classList.add(\"sketchfab-select\")\r\n\tvar selectTrigger = document.createElement(\"div\")\r\n\tselectTrigger.classList.add(\"sketchfab-select__trigger\")\r\n\tvar triggerSpan = document.createElement(\"span\")\r\n\ttriggerSpan.textContent = initialValue;\r\n\ttriggerSpan.classList.add(geometryName + \"-triggerSpan\")\r\n\tselectTrigger.appendChild(triggerSpan)\r\n\tvar arrow = document.createElement(\"div\")\r\n\tarrow.classList.add(\"sketchfab-select-arrow\")\r\n\tselectTrigger.appendChild(arrow)\r\n\t\r\n\tvar customOptions = document.createElement(\"div\")\r\n\tcustomOptions.classList.add(\"sketchfab-options\")\r\n\tvar selectTitle = document.createElement(\"h3\")\r\n\tselectTitle.classList.add(\"sketchfab-title\")\r\n\tselectTitle.textContent = selectName;\r\n\tcustomOptions.appendChild(selectTitle)\r\n\t\r\n\tselect.appendChild(selectTrigger)\r\n\tselect.appendChild(customOptions)\r\n\twrapper.appendChild(select)\t\r\n\r\n\twrapper.addEventListener('click', function() {\r\n\t\tthis.querySelector('.sketchfab-select').classList.toggle('sketchfab-select-open');\t\r\n\t})\r\n\t\r\n\treturn wrapper;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n`\r\n)\r\n}\r\n\r\nexport default ExportModal;\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { \r\n    createControl, \r\n    toggleOptionChoiceModalDisplay,\r\n    selectSurfaceConfigurationMode,\r\n    setSurfaceConfigurationMode,\r\n    addTextureControls,\r\n} from './viewerSlice';\r\n\r\nconst OptionChoiceModal = () => {\r\n    const dispatch = useDispatch();\r\n    const isSurfaceConfigurationMode = useSelector(selectSurfaceConfigurationMode)\r\n\r\n    return (\r\n        <div id=\"control-choice-modal\">\r\n            <div className=\"control-choice-content\">\r\n                <div className=\"control-choice\" onClick={() => {\r\n                    dispatch(createControl(\"animation\"));\r\n                    dispatch(toggleOptionChoiceModalDisplay());\r\n                }}>Animation</div>\r\n                <div className=\"control-choice\" onClick={() => {\r\n                    dispatch(createControl(\"color\"));\r\n                    dispatch(toggleOptionChoiceModalDisplay());\r\n                }}\r\n                >Color</div>\r\n                <div className=\"control-choice\" onClick={() => {\r\n                    dispatch(createControl(\"geometryCategory\"));\r\n                    dispatch(toggleOptionChoiceModalDisplay());\r\n                }}>Geometry Category</div>\r\n                <div className=\"control-choice\" style={{visibility: isSurfaceConfigurationMode ? \"hidden\" : \"visible\"}} onClick={() => {\r\n                    if (isSurfaceConfigurationMode === false) {\r\n                        dispatch(toggleOptionChoiceModalDisplay());\r\n                        dispatch(addTextureControls())\r\n                        dispatch(setSurfaceConfigurationMode(true))\r\n                    }\r\n                }}>Texture Configuration</div>\r\n                <div className=\"control-choice\" onClick={() => {\r\n                    dispatch(createControl(\"toggle\"));\r\n                    dispatch(toggleOptionChoiceModalDisplay());\r\n                }}>Toggle</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OptionChoiceModal;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n  selectAnimations,\r\n  updateControl,\r\n} from './viewerSlice';\r\n\r\nconst AnimationPanel = props => {\r\n\r\n    const dispatch = useDispatch();\r\n    const { option } = props;\r\n    const animations = useSelector(selectAnimations);\r\n\r\n    const animationOptions = animations.map(animation => <option value={animation[0]}>{animation[1]}</option>)\r\n    animationOptions.unshift(<option value=\"none\">Select an Animation</option>)\r\n\r\n    return (\r\n      <div style={{display: \"flex\", alignItems: \"flex-start\", flexDirection: \"column\"}}>\r\n        <div>\r\n          <label>Animation:</label>\r\n          <select \r\n            name=\"animationSelect\"\r\n            value={option.configuration.animationUID}\r\n            onChange={(e) => {\r\n              console.log(\"\\n\\n\\ne.target:\")\r\n              console.log(e.target)\r\n              console.log(\"\\n\\n\\n\")\r\n              let newConfiguration = {\r\n                ...option.configuration,\r\n                animationUID: e.target.value,\r\n                animationName: e.target.options[e.target.selectedIndex].textContent,\r\n              }\r\n              dispatch(updateControl({id: option.id, key: \"configuration\", value: newConfiguration}))\r\n            }}\r\n          >\r\n            {animationOptions}\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"start\">Start Time:</label>\r\n          <input \r\n            type=\"number\" \r\n            name=\"start\"\r\n            value={option.configuration.startTime} \r\n            onChange={(e) => {\r\n              let newConfiguration = {\r\n                ...option.configuration,\r\n                startTime: e.target.value,\r\n              }\r\n              dispatch(updateControl({id: option.id, key: \"configuration\", value: newConfiguration}))}\r\n            }\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"end\">End Time:</label>\r\n          <input \r\n            type=\"number\" \r\n            name=\"end\"\r\n            value={option.configuration.endTime} \r\n            onChange={(e) => {\r\n              let newConfiguration = {\r\n                ...option.configuration,\r\n                endTime: e.target.value,\r\n              }\r\n              dispatch(updateControl({id: option.id, key: \"configuration\", value: newConfiguration}))}\r\n            }\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default AnimationPanel;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n  selectMaterials, \r\n  updateControl,\r\n} from './viewerSlice';\r\nimport hexRgb from 'hex-rgb';\r\n\r\nconst ColorPanel = props => {\r\n\r\n    const dispatch = useDispatch(); \r\n    const { option } = props\r\n    const materials = useSelector(selectMaterials); \r\n\r\n    return (\r\n    <div>\r\n      <div className=\"input__container\">\r\n        <label htmlFor=\"materials\">Material:</label>\r\n        {renderColorsOption(option, materials, dispatch)}\r\n      </div>\r\n      <div className=\"additional-color__container\" id={`${option.id}-additionalColors`}>\r\n        {renderAdditionalColors(option.id, option.additionalColors, dispatch)}\r\n      </div>\r\n      <div className=\"input__container\">\r\n        <button \r\n          id=\"addColor\"\r\n          className=\"add__button\"\r\n          onClick={() => {\r\n            if(option.additionalColors === undefined || option.additionalColors === null) {\r\n                const transferObject = {\r\n                  id: option.id, \r\n                  key: \"additionalColors\", \r\n                  value: [{color:\"#ffffff\", name: \"white\", colorRGB: [1,1,1]}]\r\n                };\r\n                \r\n                dispatch(updateControl(transferObject));\r\n            } else {\r\n              let newColors = [];\r\n              for (let i = 0; i<option.additionalColors.length; ++i) {\r\n                newColors[i] = option.additionalColors[i];\r\n              }\r\n              newColors.push({color: \"#ffffff\", name: \"default\", colorRGB: [1,1,1]});\r\n              dispatch(updateControl({id: option.id, key: \"additionalColors\", value: newColors}));\r\n            }\r\n          }}\r\n        >+ Add Color</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n  \r\nconst renderAdditionalColors = (id, additionalColors, dispatch) => {\r\n    if (additionalColors == null || additionalColors == undefined) {\r\n      return <div></div>\r\n    } else {\r\n      return additionalColors.map((color, index, array) => (\r\n        <div className=\"input__container\">\r\n          <label htmlFor=\"defaultColor\">Alternate Color:</label>\r\n          <input \r\n            type=\"color\" \r\n            name=\"additionalColor\" \r\n            id={`${id}-${index}-additionalColor`} \r\n            value={additionalColors[index].color}\r\n            onChange={(e) => {\r\n              const newArray = [];\r\n              for (let i=0; i<array.length; ++i) {\r\n                const newColor = {};\r\n                if (i === index) {\r\n                  newColor.color = e.target.value;\r\n                  newColor.colorRGB = hexRgb(e.target.value, {format: 'array'}).map(num => num/255);\r\n                  newColor.name = array[i].name;\r\n                } else {\r\n                  newColor.color = array[i].color;\r\n                  newColor.colorRGB = array[i].colorRGB;\r\n                  newColor.name = array[i].name;\r\n                }\r\n                newArray[i] = newColor;\r\n              }\r\n              dispatch(updateControl({id: id, key: \"additionalColors\", value: newArray}));\r\n            }}      \r\n          />\r\n          <input\r\n            type=\"text\"\r\n            value={additionalColors[index].name}\r\n            onChange={(e) => {\r\n              const newArray = [];\r\n              for (let i=0; i<array.length; ++i) {\r\n                const newColor = {};\r\n                if (i === index) {\r\n                  newColor.color = array[i].color;\r\n                  newColor.colorRGB = array[i].colorRGB;\r\n                  newColor.name = e.target.value;\r\n                } else {\r\n                  newColor.color = array[i].color;\r\n                  newColor.colorRGB = array[i].colorRGB;\r\n                  newColor.name = array[i].name;\r\n                }\r\n                newArray[i] = newColor;\r\n              }\r\n              dispatch(updateControl({id: id, key: \"additionalColors\", value: newArray}));\r\n            }}      \r\n          />\r\n        </div>\r\n      ))\r\n    }\r\n  }\r\n  \r\nconst renderColorsOption = (option, materials, dispatch) => {\r\n  \r\n    const materialsHtml = materials.map((material, index) => <option value={index}>{material.name}</option>)\r\n    materialsHtml.unshift(<option value=\"none\">Select a Material</option>)\r\n\r\n    return (\r\n      <select \r\n        name=\"materials\" \r\n        id=\"materials\"\r\n        onChange={(e) => {\r\n          dispatch(updateControl({id: option.id, key: \"entityIndex\", value: e.target.value }));\r\n          dispatch(updateControl({id: option.id, key: \"entity\", value: materials[e.target.value] }));\r\n        }}\r\n        value={option.entityIndex}\r\n      >\r\n        {materialsHtml}\r\n      </select>\r\n    )\r\n}\r\n\r\nexport default ColorPanel;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n  selectGroupingOptions,\r\n  selectHiddenCategoryConfigurations,\r\n  selectControls,\r\n  setUnselectedGeometries,\r\n  setHiddenCategoryConfigurations,\r\n  updateControl,\r\n} from './viewerSlice';\r\nimport { ReactSortable } from 'react-sortablejs';\r\n\r\nconst ElementCategoryPanel = props => {\r\n\r\n    const dispatch = useDispatch();\r\n    const { option } = props;\r\n    const unselectedGeometries = useSelector(selectGroupingOptions);\r\n    const selectedGeometries = option.configuration.geometries;\r\n    const hiddenCategoryConfigurations = useSelector(selectHiddenCategoryConfigurations);\r\n    const controls = useSelector(selectControls)\r\n\r\n    const renderUnselectedGeometryMultiselect = () => unselectedGeometries.map((geometry, index) => (\r\n            <div \r\n              key={`element-${option.id}-${index}`} \r\n              className=\"geometry-option\"\r\n              style={{display: \"flex\"}} \r\n              onClick={() => {\r\n                let newUnselectedGeometries = JSON.parse(JSON.stringify(unselectedGeometries))\r\n                let selectedGeometry = newUnselectedGeometries.splice(index, 1)[0]\r\n                let newConfiguration = JSON.parse(JSON.stringify(option.configuration))\r\n                newConfiguration.geometries.push(selectedGeometry)\r\n                dispatch(updateControl({ id: option.id, key: \"configuration\", value: newConfiguration }))\r\n                dispatch(setUnselectedGeometries(newUnselectedGeometries))\r\n              }}\r\n            >\r\n              <div>{geometry.designation}</div>\r\n            </div>\r\n          ))\r\n\r\n    const renderSelectedGeometryMultiselect = () => {     \r\n\r\n      return selectedGeometries.map((geometry, index) => {\r\n        \r\n        return (\r\n          <div style={{display: \"flex\"}}>\r\n          <div key={`element-${option.id}-${index}`}>\r\n            <div style={{display: \"flex\"}}>\r\n              <div style={{display: \"flex\", flex: \"1 1 auto\", fontWeight: \"bold\"}}>\r\n                <div>{geometry.designation}</div>\r\n              </div>\r\n              <div>Animation:</div>\r\n              <input \r\n                type=\"checkbox\" \r\n                checked={geometry.allowsAnimation}\r\n                onChange={() => {\r\n                  let newGeometries = JSON.parse(JSON.stringify(selectedGeometries))\r\n                  newGeometries[index].allowsAnimation = !geometry.allowsAnimation;\r\n                  setSelectedGeometries(newGeometries)\r\n                }}\r\n              />\r\n            </div>\r\n            <div style={{display: \"flex\"}}>\r\n              <div>Name:</div>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Enter human readable name\"\r\n                value={geometry.humanReadable}\r\n                onChange={e => {\r\n                  let newGeometries = JSON.parse(JSON.stringify(selectedGeometries))\r\n                  newGeometries[index].humanReadable = e.target.value;\r\n                  setSelectedGeometries(newGeometries)\r\n                }}\r\n              />\r\n            </div>\r\n            {renderDisableMultiSelect(geometry.designation)}\r\n          </div>\r\n          <div style={{display: \"flex\", flex: \"1 1 auto\"}}>\r\n              <button \r\n                title=\"Remove option\"\r\n                onClick={() => {\r\n                  let newUnselectedGeometries = JSON.parse(JSON.stringify(unselectedGeometries))\r\n                  let newConfiguration = JSON.parse(JSON.stringify(option.configuration))\r\n                  let unSelectedGeometry = newConfiguration.geometries.splice(index, 1)[0]\r\n                  newUnselectedGeometries.unshift(unSelectedGeometry)\r\n                  dispatch(updateControl({ id: option.id, key: \"configuration\", value: newConfiguration }))\r\n                  dispatch(setUnselectedGeometries(newUnselectedGeometries))\r\n                }}\r\n              >\r\n                <svg \r\n                  fill=\"currentColor\" \r\n                  preserveAspectRatio=\"xMidYMid meet\" \r\n                  height=\"1em\" \r\n                  width=\"1em\" \r\n                  viewBox=\"0 0 40 40\" \r\n                  style={{verticalAlign: \"middle\"}}\r\n                >\r\n                  <g>\r\n                    <path d=\"m15.9 30.7v-15.7q0-0.3-0.2-0.5t-0.5-0.2h-1.4q-0.3 0-0.5 0.2t-0.2 0.5v15.7q0 0.3 0.2 \r\n                    0.5t0.5 0.2h1.4q0.3 0 0.5-0.2t0.2-0.5z m5.7 0v-15.7q0-0.3-0.2-0.5t-0.5-0.2h-1.4q-0.3 0-0.5 \r\n                    0.2t-0.2 0.5v15.7q0 0.3 0.2 0.5t0.5 0.2h1.4q0.3 0 0.5-0.2t0.2-0.5z m5.8 \r\n                    0v-15.7q0-0.3-0.2-0.5t-0.6-0.2h-1.4q-0.3 0-0.5 0.2t-0.2 0.5v15.7q0 0.3 0.2 0.5t0.5 \r\n                    0.2h1.4q0.4 0 0.6-0.2t0.2-0.5z m-12.2-22.1h10l-1.1-2.6q-0.1-0.2-0.3-0.3h-7.1q-0.2 \r\n                    0.1-0.4 0.3z m20.7 0.7v1.4q0 0.3-0.2 0.5t-0.5 0.2h-2.1v21.2q0 1.8-1.1 3.2t-2.5 \r\n                    1.3h-18.6q-1.4 0-2.5-1.3t-1-3.1v-21.3h-2.2q-0.3 0-0.5-0.2t-0.2-0.5v-1.4q0-0.3 \r\n                    0.2-0.5t0.5-0.2h6.9l1.6-3.8q0.3-0.8 1.2-1.4t1.7-0.5h7.2q0.9 0 1.8 0.5t1.2 1.4l1.5 \r\n                    3.8h6.9q0.3 0 0.5 0.2t0.2 0.5z\"></path>\r\n                  </g>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )\r\n      })\r\n    }\r\n\r\n    const renderDisableMultiSelect = (currentElementDesignation) => {\r\n    \r\n      var multiSelects = [];\r\n      for (let i=0; i<controls.length; ++i) {\r\n        if (controls[i].type === \"geometryCategory\" && controls[i].id !== option.id) {\r\n          \r\n          var multiSelect = controls[i].configuration.geometries.map(element => {\r\n            let showChecked = false;\r\n            \r\n            if (hiddenCategoryConfigurations[currentElementDesignation] !== undefined) {\r\n              if (hiddenCategoryConfigurations[currentElementDesignation].includes(element.designation)) {\r\n                showChecked = true;\r\n              }\r\n            }\r\n            return (\r\n            <div style={{display: \"flex\"}}>\r\n              <input \r\n                type=\"checkbox\" \r\n                checked={showChecked}\r\n                onChange={() => {        \r\n                  let newHiddenCategoryConfigurations = JSON.parse(JSON.stringify(hiddenCategoryConfigurations))\r\n                  if(showChecked) {\r\n                    newHiddenCategoryConfigurations[currentElementDesignation] = newHiddenCategoryConfigurations[currentElementDesignation].filter(hiddenElementDesignation => hiddenElementDesignation !== element.designation)\r\n                    newHiddenCategoryConfigurations[element.designation] = newHiddenCategoryConfigurations[element.designation].filter(hiddenElementDesignation => hiddenElementDesignation !== currentElementDesignation)\r\n                  } else {\r\n                    if (newHiddenCategoryConfigurations[currentElementDesignation] === undefined) {\r\n                      newHiddenCategoryConfigurations[currentElementDesignation] = [];\r\n                    }\r\n                    newHiddenCategoryConfigurations[currentElementDesignation].push(element.designation)\r\n                    if(newHiddenCategoryConfigurations[element.designation] === undefined) {\r\n                      newHiddenCategoryConfigurations[element.designation] = [];\r\n                    }\r\n                    newHiddenCategoryConfigurations[element.designation].push(currentElementDesignation);\r\n                  }\r\n\r\n                  dispatch(setHiddenCategoryConfigurations(newHiddenCategoryConfigurations))\r\n                }}\r\n              />\r\n              <div>{element.designation}</div>\r\n            </div>            \r\n            )\r\n          })\r\n          multiSelects.push(\r\n            <div>\r\n              <div style={{marginLeft: 4, color: \"blue\"}}>{controls[i].name}</div>\r\n              {multiSelect}\r\n            </div>\r\n          )\r\n        }\r\n      }\r\n      return (\r\n        <div style={{textAlign: \"left\", marginLeft: 16}}>\r\n          <div style={{marginLeft: 4}}>Disable when selected:</div>\r\n          {multiSelects}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    const setSelectedGeometries = (selectedGeometries) => {\r\n      let newConfiguration = JSON.parse(JSON.stringify(option.configuration))\r\n      newConfiguration.geometries = selectedGeometries\r\n      dispatch(updateControl({ id: option.id, key: \"configuration\", value: newConfiguration }))\r\n    }\r\n  \r\n    return (\r\n      <div className=\"grouping__container\">\r\n        <div style={{display:\"flex\"}}>\r\n          <p className=\"nameFieldTitle\">Initial :</p>\r\n          <select onChange={(e) => dispatch(updateControl({id: option.id, key: \"initialValue\", value: e.target.value}))}>\r\n            {selectedGeometries.map(geometry => {\r\n              let selected = geometry.designation === option.initialValue\r\n              return (<option selected={selected} value={geometry.designation}>{geometry.designation}</option>)\r\n            })}\r\n          </select>\r\n        </div>\r\n        <div className=\"additional-color__container\" id={`${option.id}-additionalColors`}>\r\n          <div style={{display: \"flex\", color: \"blue\", fontWeight: \"bold\"}}>Selected Geometries: {option.configuration.geometries.length}</div>\r\n          <div style={{borderBottom: \"1px solid black\"}}>\r\n            <ReactSortable list={selectedGeometries} setList={selectedGeometries => setSelectedGeometries(selectedGeometries)}>\r\n              {renderSelectedGeometryMultiselect()}     \r\n            </ReactSortable>\r\n          </div>\r\n          <div style={{display: \"flex\", color: \"blue\", fontWeight: \"bold\"}}>Select A Geometry:</div>\r\n          {renderUnselectedGeometryMultiselect()}          \r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default ElementCategoryPanel;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { \r\n    updateControl,\r\n} from './viewerSlice';\r\nimport { ReactSortable } from 'react-sortablejs';\r\n\r\nconst TextureConfigurationPanel = props => {\r\n    const { option } = props;\r\n    const dispatch = useDispatch();\r\n\r\n    const renderMaterialNameSegmentMap = () => option.configuration.options.map((designation, index) => (\r\n        <div>\r\n            {designation.name}\r\n            <input \r\n                value={designation.humanReadable} \r\n                onChange={(e) => {\r\n                    let newConfiguration = JSON.parse(JSON.stringify(option.configuration))\r\n                    newConfiguration.options[index].humanReadable = e.target.value;\r\n                    dispatch(updateControl({id: option.id, key: \"configuration\", value: newConfiguration}))\r\n                }}\r\n            />\r\n        </div>\r\n    ))\r\n\r\n    const updateOptions = (newOptions) => {\r\n        let newConfiguration = JSON.parse(JSON.stringify(option.configuration))\r\n        newConfiguration.options = newOptions;\r\n        dispatch(updateControl({id: option.id, key: \"configuration\", value: newConfiguration}))\r\n    }\r\n  \r\n    return (\r\n      <div className=\"grouping__container\">\r\n        <div style={{display:\"flex\"}}>\r\n            <p className=\"nameFieldTitle\">Initial :</p>\r\n            <select onChange={(e) => dispatch(updateControl({id: option.id, key: \"initialValue\", value: e.target.value}))}>\r\n                {option.configuration.options.map(designation => {\r\n                    let selected = designation.name === option.initialValue\r\n                    return   (<option selected={selected} value={designation.name}>{designation.name}</option>)\r\n                })}\r\n            </select>\r\n        </div>\r\n          <div>\r\n            <h4>Code Name Map:</h4>\r\n            <ReactSortable list={option.configuration.options} setList={newOptions => updateOptions(newOptions)}>\r\n                {renderMaterialNameSegmentMap()}\r\n            </ReactSortable>\r\n          </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default TextureConfigurationPanel;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n  selectSceneGraph,\r\n  updateControl,\r\n} from './viewerSlice';\r\n\r\nconst TogglePanel = props => {\r\n\r\n    const dispatch = useDispatch();\r\n    const { option } = props;\r\n    const sceneGraph = useSelector(selectSceneGraph);\r\n\r\n    const sceneGraphHtml = sceneGraph.map(node => <option value={node.instanceID}>{addDashes(node.depth)}{node.name}</option>)\r\n    sceneGraphHtml.unshift(<option value={0}>Select a Node</option>)\r\n  \r\n    return (\r\n      <select \r\n        name=\"nodes\" \r\n        id=\"nodes\"\r\n        className=\"material__select\"\r\n        value={option.entity.instanceID}\r\n        onChange={e => dispatch(updateControl({id: option.id, key: \"entity\", value: {instanceID: e.target.value}}))}\r\n      >\r\n        {sceneGraphHtml}\r\n      </select>\r\n    )\r\n}\r\n  \r\nconst addDashes = number => {\r\n    var dashes = \"\";\r\n    for (let i=0; i<number; ++i) {\r\n        dashes += \"--\"\r\n    }\r\n\r\n    return dashes;\r\n}\r\n\r\nexport default TogglePanel;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n  toggleOptionChoiceModalDisplay, \r\n  selectControls, \r\n  selectDisableButtons,\r\n  updateControl,\r\n  setControls,\r\n} from './viewerSlice';\r\nimport AnimationPanel from './AnimationPanel';\r\nimport ColorPanel from './ColorPanel';\r\nimport ElementCategoryPanel from './ElementCategoryPanel'\r\nimport TextureConfigurationPanel from './TextureCategoryPanel';\r\nimport TogglePanel from './TogglePanel';\r\nimport { ReactSortable } from 'react-sortablejs';\r\n\r\nconst OptionPanel = () => {  \r\n  \r\n  const options = useSelector(selectControls);\r\n  const disableButtons = useSelector(selectDisableButtons);\r\n\r\n  const dispatch = useDispatch();\r\n\r\nconst renderPanel = (option) => {\r\n  if (option.type === \"animation\") {\r\n    return <AnimationPanel option={option} />;\r\n  } else if (option.type === \"color\") {\r\n    return <ColorPanel option={option} />;\r\n  } else if (option.type === \"geometryCategory\") {\r\n    return <ElementCategoryPanel option={option} />;\r\n  } else if (option.type === \"textureCategory\") {\r\n    return <TextureConfigurationPanel option={option} />;\r\n  } else if (option.type === \"toggle\") {\r\n    return <TogglePanel option={option} />;\r\n  }\r\n}\r\n\r\nconst renderOptions = (options, dispatch) => {\r\n  \r\n  let optionsHtml = options.map((option, index, array) => (\r\n    <div className=\"single-option__panel\" key={`option-${index}`}>\r\n      <div className=\"single-option__header\">\r\n        <h3 className=\"single-option__title\">{option.id}. {option.type}</h3>\r\n        <button \r\n          id={`collapseButton${option.id}`}\r\n          className=\"collapse__button\"\r\n          onClick={(e) => dispatch(updateControl({\r\n            id: option.id,\r\n            key: \"isExpanded\",\r\n            value: !option.isExpanded\r\n          }))}\r\n        >\r\n          {option.isExpanded ? \"Collapse\" : \"Expand\"}\r\n        </button>\r\n        <button \r\n          title=\"Remove option\"\r\n          onClick={() => {\r\n            const newArray = array.filter(control => control.id !== option.id);\r\n            dispatch(setControls(newArray));\r\n          }}\r\n        >\r\n          <svg \r\n            fill=\"currentColor\" \r\n            preserveAspectRatio=\"xMidYMid meet\" \r\n            height=\"1em\" \r\n            width=\"1em\" \r\n            viewBox=\"0 0 40 40\" \r\n            style={{verticalAlign: \"middle\"}}\r\n          >\r\n            <g>\r\n              <path d=\"m15.9 30.7v-15.7q0-0.3-0.2-0.5t-0.5-0.2h-1.4q-0.3 0-0.5 0.2t-0.2 0.5v15.7q0 0.3 0.2 \r\n              0.5t0.5 0.2h1.4q0.3 0 0.5-0.2t0.2-0.5z m5.7 0v-15.7q0-0.3-0.2-0.5t-0.5-0.2h-1.4q-0.3 0-0.5 \r\n              0.2t-0.2 0.5v15.7q0 0.3 0.2 0.5t0.5 0.2h1.4q0.3 0 0.5-0.2t0.2-0.5z m5.8 \r\n              0v-15.7q0-0.3-0.2-0.5t-0.6-0.2h-1.4q-0.3 0-0.5 0.2t-0.2 0.5v15.7q0 0.3 0.2 0.5t0.5 \r\n              0.2h1.4q0.4 0 0.6-0.2t0.2-0.5z m-12.2-22.1h10l-1.1-2.6q-0.1-0.2-0.3-0.3h-7.1q-0.2 \r\n              0.1-0.4 0.3z m20.7 0.7v1.4q0 0.3-0.2 0.5t-0.5 0.2h-2.1v21.2q0 1.8-1.1 3.2t-2.5 \r\n              1.3h-18.6q-1.4 0-2.5-1.3t-1-3.1v-21.3h-2.2q-0.3 0-0.5-0.2t-0.2-0.5v-1.4q0-0.3 \r\n              0.2-0.5t0.5-0.2h6.9l1.6-3.8q0.3-0.8 1.2-1.4t1.7-0.5h7.2q0.9 0 1.8 0.5t1.2 1.4l1.5 \r\n              3.8h6.9q0.3 0 0.5 0.2t0.2 0.5z\"></path>\r\n            </g>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <div style={{display: option.isExpanded ? \"block\" : \"none\"}}>\r\n        <div style={{display:\"flex\"}}>\r\n          <p className=\"nameFieldTitle\">Name:</p>\r\n          <input \r\n            type=\"text\" \r\n            name=\"colorName\" \r\n            id=\"colorName\" \r\n            value={option.name} \r\n            onChange={(e) => dispatch(updateControl({id: option.id, key: \"name\", value: e.target.value}))}\r\n          />\r\n        </div>\r\n        {renderPanel(option)}\r\n      </div>\r\n    </div>\r\n  ))\r\n\r\n  return optionsHtml;\r\n}\r\n\r\n  return (\r\n    <div style={{overflow: \"auto\", display: \"flex\", flexDirection: \"column\"}}>\r\n      <button \r\n        className=\"add-option add__button\" \r\n        disabled={disableButtons}\r\n        onClick={() => dispatch(toggleOptionChoiceModalDisplay())}\r\n      >+ Add Configurable Element</button>\r\n      <div className=\"single-option__panels__container\">\r\n        <ReactSortable list={options} setList={options => dispatch(setControls(options))}>\r\n          {renderOptions(options, dispatch)}\r\n        </ReactSortable>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OptionPanel;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n  selectSceneGraph,\r\n  selectSketchfabAPI,\r\n  setSceneGraphIsVisible,\r\n  selectSceneGraphIsVisible,\r\n  setAllNodesVisible,\r\n} from './viewerSlice';\r\n\r\nconst NodePanel = () => {\r\n    const dispatch = useDispatch()\r\n    const sceneGraph = useSelector(selectSceneGraph);\r\n    const sketchfabAPI = useSelector(selectSketchfabAPI);\r\n    const sceneGraphIsVisible = useSelector(selectSceneGraphIsVisible);\r\n\r\n    const sceneGraphHtml = sceneGraph.map(node => {\r\n      return (\r\n        <div style={{display: \"flex\"}}>\r\n          <input \r\n            id={node.instanceID}\r\n            type=\"checkbox\" \r\n            checked={sceneGraphIsVisible[node.instanceID]}\r\n            onChange={(e) => {\r\n                if (e.target.checked) {\r\n                    sketchfabAPI.show(e.target.id)\r\n                    dispatch(setSceneGraphIsVisible({id: e.target.id, value: true}))\r\n                } else {\r\n                    sketchfabAPI.hide(e.target.id)\r\n                    dispatch(setSceneGraphIsVisible({id: e.target.id, value: false}))\r\n                }\r\n            }}\r\n          />\r\n          <div className=\"node-name\">{addDashes(node.depth)}{node.name}</div>\r\n        </div>\r\n      )\r\n    })\r\n\r\n    sceneGraphHtml.unshift(\r\n      <div style={{display: \"flex\",borderBottom: \"1px solid black\"}}>\r\n        <input \r\n          type=\"checkbox\" \r\n          checked={Object.values(sceneGraphIsVisible).reduce((accum, curr) => accum && curr)}\r\n          onChange={(e) => {\r\n            dispatch(setAllNodesVisible(e.target.checked))\r\n          }}\r\n        />\r\n        <div className=\"node-name\">All Nodes</div>\r\n      </div>\r\n    )\r\n\r\n  return (\r\n    <div style={{overflow: \"auto\"}}>\r\n        <div id=\"nodeControls\">\r\n            {sceneGraphHtml}\r\n        </div>\r\n        <div id=\"animationControls\"></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst addDashes = number => {\r\n    var dashes = \"\";\r\n    for (let i=0; i<number; ++i) {\r\n        dashes += i+1 + \"_\"\r\n    }\r\n\r\n    return dashes;\r\n}\r\n\r\nexport default NodePanel;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { \r\n    setViewMode,\r\n    selectViewMode,\r\n    selectDisableButtons,\r\n} from './viewerSlice';\r\nimport OptionPanel from './OptionPanel';\r\nimport NodePanel from './NodePanel';\r\n\r\nconst ControlMenu = () => {\r\n    const dispatch = useDispatch();\r\n    const viewMode = useSelector(selectViewMode);\r\n    const disableButtons = useSelector(selectDisableButtons);\r\n\r\n    let nodesButtonStyles = {\r\n        backgroundColor: viewMode === \"nodes\" ? \"white\" : \"gray\"\r\n    }\r\n\r\n    let optionsButtonStyles = {\r\n        backgroundColor: viewMode === \"options\" ? \"white\" : \"gray\"\r\n    }\r\n\r\n    const renderPanel = (viewMode) => {\r\n        if (viewMode === \"options\") {\r\n            return <OptionPanel />\r\n        } else if (viewMode === \"nodes\") {\r\n            return <NodePanel />\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"control-menu\">\r\n            <div style={{display: \"flex\"}}>\r\n                <button \r\n                    className=\"control-menu__button\"\r\n                    style={nodesButtonStyles}\r\n                    disabled={disableButtons}\r\n                    onClick={() => dispatch(setViewMode(\"nodes\"))}\r\n                >Nodes</button>\r\n                <button \r\n                    className=\"control-menu__button\"\r\n                    style={optionsButtonStyles}\r\n                    onClick={() => dispatch(setViewMode(\"options\"))}\r\n                >Options</button>\r\n            </div>\r\n            {renderPanel(viewMode)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ControlMenu;\r\n","import React from 'react';\r\nimport Header from './components/Header'\r\nimport Viewer from './components/Viewer'\r\nimport ImportModal from './components/ImportModal';\r\nimport ExportModal from './components/ExportModal';\r\nimport OptionChoiceModal from './components/OptionChoiceModal';\r\nimport ControlMenu from './components/ControlMenu';\r\nimport './App.css';\r\nimport './globals';\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Header />\r\n      <div className=\"body\">\r\n        <Viewer />\r\n        <ControlMenu />\r\n        <ImportModal />\r\n        <ExportModal />\r\n        <OptionChoiceModal />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport viewerReducer from '../components/viewerSlice';\r\nimport logger from 'redux-logger';\r\n\r\nexport default configureStore({\r\n  reducer: viewerReducer,\r\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(logger),\r\n});\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './app/store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","var buildSceneGraph = function(state, children, depth) {\r\n\tfor (let i=0; i<children.length; ++i) {\r\n    if (children[i].type != \"Group\" && children[i].name != \"RootNode\") {\r\n      if(children[i].name == undefined) {\r\n        state.sceneGraph.push({\r\n          name: children[i].type, \r\n          depth: depth, \r\n          instanceID: children[i].instanceID,\r\n          materialID: children[i].materialID,\r\n        });\r\n      } else {\r\n        state.sceneGraph.push({\r\n          name: children[i].name, \r\n          depth: depth, \r\n          instanceID: children[i].instanceID,\r\n          materialID: children[i].materialID,\r\n        });\r\n      }\r\n      state.sceneGraphIsVisible[children[i].instanceID] = true\r\n    }\r\n\t\tif (children[i].children != undefined || children[i].children != null) {\t\t\t\r\n\t\t\tbuildSceneGraph(state, children[i].children, depth+1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar buildCategoryOptions = (state) => {   \r\n\r\n  let uniqueStrings = [];\r\n  let geometryCategoryOptions = [];\r\n  for (let i=0; i<state.sceneGraph.length; ++i) {\r\n    let nodeNameArray = state.sceneGraph[i].name.split(\"-\").filter(string => string != \"\")\r\n    let mainDesignation = nodeNameArray[0];\r\n    let capitalLetter = nodeNameArray[1];\r\n    let detailedTitle = nodeNameArray[2];\r\n    for (let i=3; i<nodeNameArray.length; ++i) {\r\n      detailedTitle += nodeNameArray[i];\r\n    }\r\n\r\n    const irrelevantStrings = [\"Group\", \"RootNode\", \"MatrixTransform\"];\r\n    if (uniqueStrings.indexOf(mainDesignation) == -1 &&\r\n      irrelevantStrings.indexOf(mainDesignation) == -1) {\r\n      uniqueStrings.push(mainDesignation);\r\n      geometryCategoryOptions.push({\r\n        instanceID: state.sceneGraph[i].instanceID,\r\n        designation: mainDesignation,\r\n        capitalLetter: capitalLetter,\r\n        detailedTitle: detailedTitle,\r\n        humanReadable: mainDesignation,\r\n        allowsAnimation: true,\r\n      })\r\n    }\r\n  }\r\n  geometryCategoryOptions.sort(function(a,b){return a.designation.charCodeAt(0)-b.designation.charCodeAt(0)})\r\n  state.groupingOptions = geometryCategoryOptions;\r\n}\r\n\r\nvar buildTextureOptions = (materials) => {  \r\n    let surfaceOptionMap = {};\r\n    let materialNameSegmentMap = {};\r\n    let surfaceAttributeNameMap = {};\r\n\r\n    let surfaceControls = [];\r\n    \r\n    for (let i=0; i<materials.length; ++i) {\r\n      var matches = materials[i].name.match(/[a-zA-Z]*-[A-Z]+-[a-zA-Z]+/g);\r\n    \r\n      if (matches !== null) {\r\n        let materialNameArray = materials[i].name.split(\"-\").filter(string => string != \"\")\r\n        let geometryName = materialNameArray[0];\r\n        let materialOptions = materials[i].name.match(/[A-Z]+-/g).map(option => option.replace(\"-\", \"\"));\r\n        let primaryValue = materialOptions[0];\r\n        \r\n        // generate material name segment map\r\n        for (let j=0; j<materialOptions.length; ++j) {\r\n          materialNameSegmentMap[materialOptions[j]] = materialOptions[j];\r\n        }\r\n\r\n        // generate select display\r\n        let isNewUniqueGeometry = surfaceOptionMap[geometryName] === undefined;\r\n        if (isNewUniqueGeometry) {\r\n          surfaceOptionMap[geometryName] = {}\r\n\r\n\r\n          surfaceControls.push({\r\n            name: geometryName + \" - Attribute 1\", \r\n            configuration: {\r\n              isPrimary: true,\r\n              ordering: 0,\r\n              geometryName: geometryName, \r\n              options: [{name: materialOptions[0], humanReadable: materialOptions[0]}]\r\n            },\r\n            entity: {instanceID: 0},\r\n            entityIndex: \"none\",\r\n            isExpanded: true,\r\n            type: \"textureCategory\",            \r\n          })\r\n\r\n          surfaceAttributeNameMap[geometryName] = [\"Attribute Name\"]\r\n          surfaceOptionMap[geometryName][materialOptions[0]] = [];\r\n          for (let j=1; j<materialOptions.length; ++j) {\r\n            surfaceAttributeNameMap[geometryName].push(\"Attribute Name\")\r\n            surfaceControls.push({\r\n              name: `${geometryName} - Attribute ${j+1}`, \r\n              configuration: {\r\n                isPrimary: false,\r\n                ordering: j,\r\n                geometryName: geometryName, \r\n                options: [{name: materialOptions[j], humanReadable: materialOptions[j]}]\r\n              },\r\n              entity: {instanceID: 0},\r\n              entityIndex: \"none\",\r\n              isExpanded: true,\r\n              type: \"textureCategory\",        \r\n            })\r\n            surfaceOptionMap[geometryName][primaryValue].push([materialOptions[j]])\r\n          }\r\n        } else {\r\n          for (var j=0; j<surfaceControls.length; ++j) {\r\n            if (surfaceControls[j].configuration.geometryName === geometryName) {\r\n\r\n              var optionExists = false;\r\n              for (var k=0; k<surfaceControls[j].configuration.options.length; ++k) {\r\n                if (surfaceControls[j].configuration.options[k].name === materialOptions[0]) {\r\n                  optionExists = true;\r\n                  break;\r\n                }\r\n              }\r\n              if(optionExists === false) {\r\n                surfaceControls[j].configuration.options.push({name: materialOptions[0], humanReadable: materialOptions[0]})\r\n              }\r\n              for (var k=1; k<materialOptions.length; ++k) {\r\n                var optionExists = false;\r\n                for (var l=0; l<surfaceControls[j+k].configuration.options.length; ++l) {\r\n                  if (surfaceControls[j+k].configuration.options[l].name === materialOptions[k]) {\r\n                    optionExists = true;\r\n                    break;\r\n                  }\r\n                }\r\n                if (optionExists === false) {\r\n                  surfaceControls[j+k].configuration.options.push({name: materialOptions[k], humanReadable: materialOptions[k]})\r\n                }\r\n              }\r\n              break;\r\n            }\r\n          }\r\n\r\n          let isNewUniquePrimaryValue = surfaceOptionMap[geometryName][primaryValue] === undefined\r\n          if (isNewUniquePrimaryValue) {\r\n            surfaceOptionMap[geometryName][primaryValue] = [];\r\n            for (let j=1; j<materialOptions.length; ++j) {\r\n              surfaceOptionMap[geometryName][primaryValue].push([materialOptions[j]])\r\n            }\r\n          } else {\r\n            for (let j=1; j<materialOptions.length; ++j) {\r\n              let currentAttributeOptions = surfaceOptionMap[geometryName][primaryValue][j-1];\r\n              let isNewUniqueValue = currentAttributeOptions.indexOf(materialOptions[j]) === -1;\r\n              if (isNewUniqueValue) {\r\n                currentAttributeOptions.push(materialOptions[j])\r\n              }\r\n            }                                  \r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return {\r\n        surfaceOptionMap,\r\n        materialNameSegmentMap,\r\n        surfaceAttributeNameMap,\r\n        surfaceControls,\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    buildSceneGraph,\r\n    buildCategoryOptions,\r\n    buildTextureOptions,\r\n}\r\n"],"sourceRoot":""}